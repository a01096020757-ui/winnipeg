<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Winnipeg / MMIWG ? kinetic poem</title>
  <style>
    :root{
      --bg: #0b0f14;
      --text: rgba(255,255,255,.92);
      --muted: rgba(255,255,255,.75);
      --red: #ff2b2b;
    }
    html, body { height: 100%; margin: 0; background: var(--bg); }
    body { font-family: ui-serif, Georgia, "Times New Roman", serif; overflow: hidden; }

    /* Stage */
    #stage{
      position: relative;
      width: 100vw;
      height: 100vh;
      display: grid;
      place-items: center;
      background: radial-gradient(80vmax 60vmax at 50% 35%, rgba(255,255,255,.06), transparent 60%);
    }

    /* Background map image (put your PNG in same folder) */
    #map{
      position: absolute;
      inset: 0;
      background: url("lake-winnipeg.png") center/cover no-repeat;
      filter: saturate(1.05) contrast(1.02);
      transform: scale(1.02);
    }

    /* A soft vignette to make text readable */
    #vignette{
      position:absolute; inset:0;
      background:
        radial-gradient(60vmax 45vmax at 50% 35%, transparent 35%, rgba(0,0,0,.35) 70%),
        linear-gradient(to bottom, rgba(0,0,0,.25), rgba(0,0,0,.45));
      pointer-events:none;
    }

    /* Orbiting word particles around the lake */
    .orbiter{
      position: absolute;
      left: 50%;
      top: 44%;
      width: 0;
      height: 0;
      pointer-events: none;
      transform: translate(-50%, -50%);
    }
    .orbiter span{
      position: absolute;
      left: 0; top: 0;
      transform: translate(-50%, -50%);
      white-space: nowrap;
      color: var(--text);
      text-shadow: 0 2px 16px rgba(0,0,0,.55);
      letter-spacing: .02em;
      mix-blend-mode: screen;
      user-select: none;
    }
    .orbiter .title{
      font-size: clamp(14px, 1.7vw, 22px);
      font-style: italic;
    }
    .orbiter .wing{
      font-size: clamp(12px, 1.2vw, 16px);
      color: var(--muted);
      opacity: .95;
    }

    /* SVG overlay for Red River path + flowing text */
    #overlay{
      position:absolute;
      inset:0;
      width:100%;
      height:100%;
      pointer-events:none;
    }

    .riverStroke{
      fill:none;
      stroke: rgba(255,255,255,.35);
      stroke-width: 2.5;
      stroke-linecap: round;
      stroke-dasharray: 6 9;
      filter: drop-shadow(0 2px 6px rgba(0,0,0,.55));
      opacity:.55;
    }

    .mmText{
      fill: var(--text);
      font-size: clamp(13px, 1.5vw, 20px);
      font-style: italic;
      letter-spacing: .02em;
      text-shadow: 0 2px 16px rgba(0,0,0,.55);
    }

    .dress{
      font-size: clamp(18px, 2.2vw, 28px);
      filter: drop-shadow(0 2px 10px rgba(0,0,0,.55));
    }

    /* UI hint */
    #hint{
      position:absolute;
      left: 18px;
      bottom: 16px;
      color: rgba(255,255,255,.75);
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, "Noto Sans", "Apple SD Gothic Neo", sans-serif;
      font-size: 13px;
      line-height: 1.35;
      text-shadow: 0 2px 10px rgba(0,0,0,.6);
      user-select:none;
    }
    #hint b{ color: rgba(255,255,255,.9); }
  </style>
</head>

<body>
  <div id="stage" aria-label="Kinetic poem stage">
    <div id="map" aria-hidden="true"></div>
    <div id="vignette" aria-hidden="true"></div>

    <!-- Orbiters around Lake Winnipeg -->
    <div class="orbiter" id="lakeOrbit" aria-hidden="true"></div>

    <!-- SVG overlay for Red River motion text + dresses -->
    <svg id="overlay" viewBox="0 0 1000 700" preserveAspectRatio="xMidYMid slice" aria-hidden="true">
      <defs>
        <!-- Approximate Red River path (tweak points to match your map image) -->
        <path id="redRiverPath"
          d="M 320 520
             C 360 500, 400 480, 430 450
             C 465 415, 500 380, 520 340
             C 545 292, 580 245, 640 205
             C 700 165, 760 150, 820 140" />
      </defs>

      <!-- Optional: show a faint river trace -->
      <use href="#redRiverPath" class="riverStroke"></use>

      <!-- Flowing MMIWG line -->
      <text class="mmText">
        <textPath href="#redRiverPath" id="mmPath" startOffset="0%">
          MMIWG, the bodies that did not make it across life ? MMIWG, the bodies that did not make it across life ?
        </textPath>
      </text>

      <!-- Dresses that follow the same path at different offsets -->
      <text class="dress">
        <textPath href="#redRiverPath" id="dress1" startOffset="15%">??</textPath>
      </text>
      <text class="dress">
        <textPath href="#redRiverPath" id="dress2" startOffset="45%">??</textPath>
      </text>
      <text class="dress">
        <textPath href="#redRiverPath" id="dress3" startOffset="75%">??</textPath>
      </text>
    </svg>

    <div id="hint">
      <b>How to run:</b> put <b>winnipeg.html</b> and <b>lake-winnipeg.png</b> in the same folder ¡æ double-click HTML.<br/>
      <b>Tweak:</b> if the Red River line doesn¡¯t match your map, edit the SVG path coordinates in <b>#redRiverPath</b>.
    </div>
  </div>

  <script>
    // --- Lake orbit text particles (around the "lake center") ---
    const lakeOrbit = document.getElementById("lakeOrbit");

    const PHRASE_MAIN = "Winnipeg, the word that does not cross the ocean";
    const PHRASE_WING = [
      "winged word",
      "moving water",
      "not possession?relation",
      "river meets river",
      "lake listens",
      "sound before spelling"
    ];

    // Create orbiting spans
    const orbiters = [];
    const count = 10;

    for (let i = 0; i < count; i++){
      const sp = document.createElement("span");
      sp.className = (i % 3 === 0) ? "title" : "wing";
      sp.textContent = (i % 3 === 0) ? PHRASE_MAIN : PHRASE_WING[i % PHRASE_WING.length];
      sp.style.opacity = (i % 3 === 0) ? "0.95" : "0.82";
      lakeOrbit.appendChild(sp);
      orbiters.push(sp);
    }

    // Animation loop
    let t0 = performance.now();

    // Lake center (percent of viewport). Adjust to match your background map.
    // You can move the orbit by changing cx/cy.
    const cx = 50;   // vw %
    const cy = 44;   // vh %

    // Radii for the ¡°µÕ±Û°Ô µÕ±Û°Ô¡± orbit feeling
    const baseR = 160;        // px
    const wobble = 40;        // px

    function animate(now){
      const t = (now - t0) / 1000;

      // Position the orbit container (so you can tweak in one place)
      lakeOrbit.style.left = cx + "vw";
      lakeOrbit.style.top  = cy + "vh";

      orbiters.forEach((sp, i) => {
        const a = t * (0.22 + i * 0.008) + i * (Math.PI * 2 / orbiters.length);
        const r = baseR + Math.sin(t * 0.9 + i) * wobble;
        const x = Math.cos(a) * r;
        const y = Math.sin(a) * (r * 0.74);

        // Slight ¡°flutter¡±
        const flutter = Math.sin(t * 2.2 + i) * 2.2;

        sp.style.transform =
          `translate(${x}px, ${y}px) rotate(${(a*180/Math.PI) + flutter}deg) translate(-50%, -50%)`;

        // Size drift
        const scale = 0.98 + (Math.sin(t * 1.1 + i) * 0.03);
        sp.style.scale = scale.toFixed(3);

        // Opacity pulse
        const o = (i % 3 === 0) ? 0.92 : (0.62 + (Math.sin(t*1.4 + i)*0.12));
        sp.style.opacity = o.toFixed(3);
      });

      // --- SVG textPath motion for Red River ---
      // Move MMIWG text along the path endlessly
      const mm = document.getElementById("mmPath");
      const d1 = document.getElementById("dress1");
      const d2 = document.getElementById("dress2");
      const d3 = document.getElementById("dress3");

      // speed controls
      const mmSpeed = 10;    // percent per second
      const dressSpeed = 14; // a bit faster so dresses "fly"

      const mmOffset = ((t * mmSpeed) % 100);
      const dOffset  = ((t * dressSpeed) % 100);

      mm.setAttribute("startOffset", (100 - mmOffset) + "%");
      d1.setAttribute("startOffset", ((15 + dOffset) % 100) + "%");
      d2.setAttribute("startOffset", ((45 + dOffset) % 100) + "%");
      d3.setAttribute("startOffset", ((75 + dOffset) % 100) + "%");

      requestAnimationFrame(animate);
    }

    requestAnimationFrame(animate);
  </script>
</body>
</html>